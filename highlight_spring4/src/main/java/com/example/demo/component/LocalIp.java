package com.example.demo.component;import org.apache.commons.lang3.StringUtils;import org.springframework.stereotype.Component;import javax.servlet.http.HttpServletRequest;import java.util.Objects;@Componentpublic class LocalIp {    private static final String UN_KNOWN = "unknown";    /**     * 1）X-Forwarded-For： HTTP 代理或者负载均衡服务器时才会添加该项。格式为X-Forwarded-For: client1, proxy1, proxy2     *      * 2）Proxy-Client-IP/WL-Proxy-Client-IP：用apache http做代理时一般会加上Proxy-Client-IP请求头，而WL-     * Proxy-Client-IP是他的weblogic插件加上的头     *     * 3）X-Real-IP：nginx代理一般会加上此请求头 4）HTTP_CLIENT_IP：其他代理服务器会加上此请求头     *      * @param request     * @return     */    public String getIp(HttpServletRequest request) {        if (Objects.isNull(request)) {            return null;        }        String proxs[] = { "X-Forwarded-For", "Proxy-Client-IP", "WL- Proxy-Client-IP", "HTTP_CLIENT_IP",                "HTTP_X_FORWARDED_FOR" };        String ip = "";        for (String prox : proxs) {            ip = request.getHeader(prox);            if (StringUtils.isBlank(ip) || UN_KNOWN.equalsIgnoreCase(ip)) {                continue;            }            break;        }        if (StringUtils.isBlank(ip)) {            return request.getRemoteAddr();        }        return ip;    }}